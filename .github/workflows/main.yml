name: Real Verilog Simulation

on: [push, workflow_dispatch]

jobs:
  test_circuit:
    runs-on: ubuntu-latest
    steps:
      - name: 1. ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
        uses: actions/checkout@v3

      - name: 2. ì‹œë®¬ë ˆì´í„°(Icarus Verilog) ì„¤ì¹˜
        run: |
          sudo apt-get update
          sudo apt-get install -y iverilog

      - name: 3. íšŒë¡œ ì»´íŒŒì¼ (srcì™€ test í´ë” í•©ì¹˜ê¸°)
        run: |
          echo "ğŸš§ ì»´íŒŒì¼ì„ ì‹œì‘í•©ë‹ˆë‹¤..."
          # src í´ë”ì˜ ëª¨ë“  íŒŒì¼(*.v)ê³¼ test í´ë”ì˜ ëª¨ë“  íŒŒì¼(*.v)ì„ í•©ì³ì„œ uart_simì´ë¼ëŠ” ì‹¤í–‰ íŒŒì¼ì„ ë§Œë“­ë‹ˆë‹¤.
          iverilog -o uart_sim src/*.v test/*.v

      - name: 4. ì‹œë®¬ë ˆì´ì…˜ ì‹¤í–‰ ë° ê²°ê³¼ ì¶œë ¥
        run: |
          echo "ğŸš€ ì‹œë®¬ë ˆì´ì…˜ì„ ì‹¤í–‰í•©ë‹ˆë‹¤..."
          # ë§Œë“¤ì–´ì§„ ì‹¤í–‰ íŒŒì¼ì„ ëŒë¦½ë‹ˆë‹¤. Testbenchì˜ $display ë‚´ìš©ì´ ì—¬ê¸°ì— ëœ¹ë‹ˆë‹¤.
          vvp uart_sim
